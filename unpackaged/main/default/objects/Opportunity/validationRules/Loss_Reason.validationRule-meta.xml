<?xml version="1.0" encoding="utf-8"?>
<ValidationRule xmlns="http://soap.sforce.com/2006/04/metadata">
    <fullName>Loss_Reason</fullName>
    <active>true</active>
    <description>Ensure all lost Opportunities have a reason lost.</description>
    <errorConditionFormula>AND(
$User.Username &lt;&gt;'rgali@blackdiamondgroup.com',
$User.Username  &lt;&gt; 'ithelpdesk@blackdiamondgroup.com',
$User.Username  &lt;&gt; 'salesforcedatamigration@blackdiamondgroup.com',
RecordType.Name &lt;&gt; "Vanguard",
CONTAINS(TEXT(StageName),"Lost"),
ISBLANK(TEXT(Loss_Reason__c)),
OR(
RecordType.Name = "BD MSS Major Projects",
RecordType.Name = "BD Energy",
RecordType.Name = "BD Workforce",
RecordType.Name = "BD Lodging",
RecordType.Name = "BD Disaster"))</errorConditionFormula>
    <errorDisplayField>Loss_Reason__c</errorDisplayField>
    <errorMessage>Indicate why the Opportunity was Lost.</errorMessage>
</ValidationRule>
