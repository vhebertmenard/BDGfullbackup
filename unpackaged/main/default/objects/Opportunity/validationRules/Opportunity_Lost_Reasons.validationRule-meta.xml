<?xml version="1.0" encoding="utf-8"?>
<ValidationRule xmlns="http://soap.sforce.com/2006/04/metadata">
    <fullName>Opportunity_Lost_Reasons</fullName>
    <active>false</active>
    <description>Legacy field for CPQ.</description>
    <errorConditionFormula>AND(
$User.Username &lt;&gt;'rgali@blackdiamondgroup.com',
$User.Username  &lt;&gt; 'ithelpdesk@blackdiamondgroup.com',
$User.Username  &lt;&gt; 'salesforcedatamigration@blackdiamondgroup.com',
    RecordType.Name &lt;&gt; "Vanguard",
    OR(
        CONTAINS(TEXT(StageName),"Completed"), 
        CONTAINS(TEXT(StageName),"Awarded"),
        IsWon,
        AND(
            NOT(ISBLANK(SBQQ__PrimaryQuote__c)),
            OR(
                CONTAINS(TEXT(StageName),"Closed Lost"),
                CONTAINS(TEXT(StageName),"Lost"),
                CONTAINS(TEXT(StageName),"Cancelled")
              )
        )
       ),
ISBLANK( Reason_s_Won_Lost_Cancelled__c ),
RecordType.Name &lt;&gt; "BD MSS Major Projects",
RecordType.Name &lt;&gt; "BD Energy",
RecordType.Name &lt;&gt; "BD Workforce",
RecordType.Name &lt;&gt; "BD Lodging",
RecordType.Name &lt;&gt; "BD Disaster")</errorConditionFormula>
    <errorDisplayField>Reason_s_Won_Lost_Cancelled__c</errorDisplayField>
    <errorMessage>Select why the opportunity was Won or Lost</errorMessage>
</ValidationRule>
