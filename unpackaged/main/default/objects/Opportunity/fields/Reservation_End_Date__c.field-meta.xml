<?xml version="1.0" encoding="utf-8"?>
<CustomField xmlns="http://soap.sforce.com/2006/04/metadata">
    <fullName>Reservation_End_Date__c</fullName>
    <formula>IF(
    OR(
        ISBLANK(Estimated_First_Revenue__c),
        ISBLANK(SBQQ__PrimaryQuote__r.SBQQ__SubscriptionTerm__c)
    ),
    NULL,
    ADDMONTHS(Estimated_First_Revenue__c, SBQQ__PrimaryQuote__r.SBQQ__SubscriptionTerm__c)
    -
    IF(
        /* Is Estimated_First_Revenue__c the last day of its month? */
        DAY(Estimated_First_Revenue__c)
        =
        DAY(
            ADDMONTHS(
                DATE(
                    YEAR(Estimated_First_Revenue__c),
                    MONTH(Estimated_First_Revenue__c),
                    1
                ),
                1
            ) - 1
        ),
        0,  /* if it WAS month-end: don't subtract a day */
        1   /* if it was NOT month-end: subtract a day */
    )
)</formula>
    <label>Reservation End Date</label>
    <required>false</required>
    <trackHistory>false</trackHistory>
    <type>Date</type>
</CustomField>
